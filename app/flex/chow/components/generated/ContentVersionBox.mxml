<?xml version="1.0" encoding="utf-8"?>
<mx:HBox xmlns:mx="http://www.adobe.com/2006/mxml" width="100%" label="ContentVersion"
  xmlns:rx="org.restfulx.components.rx.*">
  <mx:Script><![CDATA[
    import org.restfulx.Rx;
    import org.restfulx.utils.RxUtils;
    import chow.models.ContentVersion;

    [Bindable]
    private var contentVersion:ContentVersion = new ContentVersion();

    private function newContentVersion():void {
      contentVersion = new ContentVersion();
      contentVersionsList.selectedIndex = -1;
    }

    private function saveContentVersion():void {
      updateModelProperties();
      if (contentVersion.id) {
        contentVersion.update({onSuccess: onContentVersionUpdate});
      } else {
        contentVersion.create({onSuccess: onContentVersionCreate});
      }
    }
  
    private function updateModelProperties():void {
      contentVersion.contentId = int(contentIdTextInput.text);
      contentVersion.version = int(versionTextInput.text);
      contentVersion.articleId = int(articleIdTextInput.text);
      contentVersion.userId = int(userIdTextInput.text);
      contentVersion.title = titleTextInput.text;
      contentVersion.permalink = permalinkTextInput.text;
      contentVersion.excerpt = excerptTextArea.text;
      contentVersion.body = bodyTextArea.text;
      contentVersion.excerptHtml = excerptHtmlTextArea.text;
      contentVersion.bodyHtml = bodyHtmlTextArea.text;
      contentVersion.publishedAt = publishedAtDateTimeTextInput.date;
      contentVersion.createdAt = createdAtDateTimeTextInput.date;
      contentVersion.updatedAt = updatedAtDateTimeTextInput.date;
      contentVersion.author = authorTextInput.text;
      contentVersion.authorUrl = authorUrlTextInput.text;
      contentVersion.authorEmail = authorEmailTextInput.text;
      contentVersion.authorIp = authorIpTextInput.text;
      contentVersion.commentsCount = int(commentsCountTextInput.text);
      contentVersion.updaterId = int(updaterIdTextInput.text);
      contentVersion.versionedType = versionedTypeTextInput.text;
      contentVersion.siteId = int(siteIdTextInput.text);
      contentVersion.approved = approvedCheckBox.selected;
      contentVersion.commentAge = int(commentAgeTextInput.text);
      contentVersion.filter = filterTextInput.text;
      contentVersion.userAgent = userAgentTextInput.text;
      contentVersion.referrer = referrerTextInput.text;
      contentVersion.assetsCount = int(assetsCountTextInput.text);
  
    }
   
    private function destroyContentVersion():void {
      contentVersion.destroy({onSuccess: onContentVersionDestroy});
    }
    
    private function onContentVersionSelect():void {
      contentVersion = RxUtils.clone(contentVersionsList.selectedItem) as ContentVersion;
    }
    
    private function onContentVersionCreate(result:ContentVersion):void {
      contentVersion = new ContentVersion;
    }
    
    private function onContentVersionUpdate(result:ContentVersion):void {
      contentVersionsList.selectedItem = result;
      onContentVersionSelect();
    }
    
    private function onContentVersionDestroy(result:ContentVersion):void {
      onContentVersionCreate(result);
    }    
  ]]></mx:Script>
  <mx:Panel id="contentVersionsPanel"
    title="ContentVersions" cornerRadius="0" dropShadowEnabled="false" borderStyle="solid"
    borderThickness="1" backgroundColor="#EEEEEE" width="25%" height="100%">
    <mx:List id="contentVersionsList"
      width="100%" height="100%"
      dataProvider="{Rx.models.index(ContentVersion)}"
      change="onContentVersionSelect()"/>
    <mx:ControlBar width="100%">
      <mx:Button label="New ContentVersion" width="100%" height="30"
        click="newContentVersion()"/>
    </mx:ControlBar>
  </mx:Panel>
  <mx:Panel title="Edit ContentVersion" cornerRadius="0" dropShadowEnabled="false" borderStyle="solid"
    borderThickness="1" backgroundColor="#EEEEEE" width="75%" height="100%">
    <mx:Form width="100%" height="100%">
      <mx:FormItem label="ContentId" width="100%">
        <mx:TextInput id="contentIdTextInput" width="100%" text="{contentVersion.contentId}"/>
      </mx:FormItem>
      <mx:FormItem label="Version" width="100%">
        <mx:TextInput id="versionTextInput" width="100%" text="{contentVersion.version}"/>
      </mx:FormItem>
      <mx:FormItem label="ArticleId" width="100%">
        <mx:TextInput id="articleIdTextInput" width="100%" text="{contentVersion.articleId}"/>
      </mx:FormItem>
      <mx:FormItem label="UserId" width="100%">
        <mx:TextInput id="userIdTextInput" width="100%" text="{contentVersion.userId}"/>
      </mx:FormItem>
      <mx:FormItem label="Title" width="100%">
        <mx:TextInput id="titleTextInput" width="100%" text="{contentVersion.title}"/>
      </mx:FormItem>
      <mx:FormItem label="Permalink" width="100%">
        <mx:TextInput id="permalinkTextInput" width="100%" text="{contentVersion.permalink}"/>
      </mx:FormItem>
      <mx:FormItem label="Excerpt" width="100%">
        <mx:TextArea id="excerptTextArea" width="100%" height="200" text="{contentVersion.excerpt}"/>
      </mx:FormItem>
      <mx:FormItem label="Body" width="100%">
        <mx:TextArea id="bodyTextArea" width="100%" height="200" text="{contentVersion.body}"/>
      </mx:FormItem>
      <mx:FormItem label="ExcerptHtml" width="100%">
        <mx:TextArea id="excerptHtmlTextArea" width="100%" height="200" text="{contentVersion.excerptHtml}"/>
      </mx:FormItem>
      <mx:FormItem label="BodyHtml" width="100%">
        <mx:TextArea id="bodyHtmlTextArea" width="100%" height="200" text="{contentVersion.bodyHtml}"/>
      </mx:FormItem>
      <mx:FormItem label="PublishedAt" width="100%">
        <rx:DateTimeTextInput id="publishedAtDateTimeTextInput" width="200" date="{contentVersion.publishedAt}"/>
      </mx:FormItem>
      <mx:FormItem label="CreatedAt" width="100%">
        <rx:DateTimeTextInput id="createdAtDateTimeTextInput" width="200" date="{contentVersion.createdAt}"/>
      </mx:FormItem>
      <mx:FormItem label="UpdatedAt" width="100%">
        <rx:DateTimeTextInput id="updatedAtDateTimeTextInput" width="200" date="{contentVersion.updatedAt}"/>
      </mx:FormItem>
      <mx:FormItem label="Author" width="100%">
        <mx:TextInput id="authorTextInput" width="100%" text="{contentVersion.author}"/>
      </mx:FormItem>
      <mx:FormItem label="AuthorUrl" width="100%">
        <mx:TextInput id="authorUrlTextInput" width="100%" text="{contentVersion.authorUrl}"/>
      </mx:FormItem>
      <mx:FormItem label="AuthorEmail" width="100%">
        <mx:TextInput id="authorEmailTextInput" width="100%" text="{contentVersion.authorEmail}"/>
      </mx:FormItem>
      <mx:FormItem label="AuthorIp" width="100%">
        <mx:TextInput id="authorIpTextInput" width="100%" text="{contentVersion.authorIp}"/>
      </mx:FormItem>
      <mx:FormItem label="CommentsCount" width="100%">
        <mx:TextInput id="commentsCountTextInput" width="100%" text="{contentVersion.commentsCount}"/>
      </mx:FormItem>
      <mx:FormItem label="UpdaterId" width="100%">
        <mx:TextInput id="updaterIdTextInput" width="100%" text="{contentVersion.updaterId}"/>
      </mx:FormItem>
      <mx:FormItem label="VersionedType" width="100%">
        <mx:TextInput id="versionedTypeTextInput" width="100%" text="{contentVersion.versionedType}"/>
      </mx:FormItem>
      <mx:FormItem label="SiteId" width="100%">
        <mx:TextInput id="siteIdTextInput" width="100%" text="{contentVersion.siteId}"/>
      </mx:FormItem>
      <mx:FormItem label="Approved" width="100%">
        <mx:CheckBox id="approvedCheckBox" selected="{contentVersion.approved}"/>
      </mx:FormItem>
      <mx:FormItem label="CommentAge" width="100%">
        <mx:TextInput id="commentAgeTextInput" width="100%" text="{contentVersion.commentAge}"/>
      </mx:FormItem>
      <mx:FormItem label="Filter" width="100%">
        <mx:TextInput id="filterTextInput" width="100%" text="{contentVersion.filter}"/>
      </mx:FormItem>
      <mx:FormItem label="UserAgent" width="100%">
        <mx:TextInput id="userAgentTextInput" width="100%" text="{contentVersion.userAgent}"/>
      </mx:FormItem>
      <mx:FormItem label="Referrer" width="100%">
        <mx:TextInput id="referrerTextInput" width="100%" text="{contentVersion.referrer}"/>
      </mx:FormItem>
      <mx:FormItem label="AssetsCount" width="100%">
        <mx:TextInput id="assetsCountTextInput" width="100%" text="{contentVersion.assetsCount}"/>
      </mx:FormItem>
    </mx:Form>
    <mx:ControlBar width="100%">
      <mx:Button label="Save ContentVersion" width="50%" height="30"
        click="saveContentVersion()"/>
      <mx:Button label="Delete ContentVersion" width="50%" height="30"
        enabled="{RxUtils.canDeleteModel(contentVersion)}"
        click="destroyContentVersion()"/>
    </mx:ControlBar>
  </mx:Panel>
</mx:HBox>